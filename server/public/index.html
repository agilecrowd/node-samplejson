<html lang="en">
<head>
<title>SampleJSON</title>
<style type="text/css" media="screen">
  #editor {
      position: absolute;
      top: 120;
      right: 800;
      bottom: 0;
      left: 0;
  }
  #output {
      position: absolute;
      top: 120;
      right: 0;
      bottom: 0;
      left: 800;
  }
</style>
</head>
<body>

<h1 style="color: #c0c0c0; font-size: 2em; margin-bottom:0; line-height: 1em;">
  <span style="color: #f49040;">SampleJSON.io</span>
  <span style="font-size: 0.8em">Online Schema Editor & REST api support</span>
</h1>
<i style="font-size: 0.88em">"Edit your schema online, call your REST api instantly. Simple, light and fast!"</i>
<br/>
<br/>
<button style="font-size: 1.2em; margin-bottom:0; line-height: 1em;" onclick="save()">Save!</button>
<button style="font-size: 1.2em; margin-bottom:0; line-height: 1em;" onclick="run()">Run!</button>
<i style="font-size: 1em">You can also get the JSON with the REST API: "http://{hostname:port}/api/v1/samples/?username={username}&app_name={app_name}"</i>
<div id="editor"></div>
<div id="output"></div>

<script src="/javascripts/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://code.jquery.com/jquery-2.2.3.min.js" type="text/javascript" charset="utf-8"></script>
<script>
  // Set the default size of fonts
  document.getElementById('editor').style.fontSize='14px'
  document.getElementById('output').style.fontSize='14px'

  var editor = ace.edit("editor")
  editor.setTheme("ace/theme/monokai")
  editor.getSession().setMode("ace/mode/handlebars")
  editor.$blockScrolling = Infinity

  var output = ace.edit("output")
  output.setTheme("ace/theme/monokai")
  output.getSession().setMode("ace/mode/json")
  output.setReadOnly(true)
  output.getSession().setTabSize(2)
  output.getSession().setUseSoftTabs(true)

  function save() {
    $.post("/samples/",
    {
      content: editor.getValue(),
      username: 'hello',
      app_name: 'world'
    },
    function(data, status){
        // alert("Data: " + data + "\nStatus: " + status);
    })
  }

  function run() {
    $.get("/api/v1/samples/",
    {
      username: 'hello',
      app_name: 'world'
    },
    function(data, status){
      output.setValue(JSON.stringify(data, null, '\t'))
    })
  }

  $(document).ready(function() {
    $.get('/samples/',
    {
      username: 'hello',
      app_name: 'world'
    },
    function(data, status){
        // alert("Data: " + data + "\nStatus: " + status)
        editor.setValue(data)
    })
  })
</script>
</body>
</html>
